apiVersion: v1
kind: Namespace
metadata:
  labels:
    app.kubernetes.io/part-of: jibudata-backup-rest-server
  name: backup-saas-system
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: backupjobs.ys.jibudata.com
spec:
  group: ys.jibudata.com
  names:
    kind: BackupJob
    listKind: BackupJobList
    plural: backupjobs
    singular: backupjob
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: BackupJob is the Schema for the backupjobs API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: BackupJobSpec defines the desired state of BackupJob
            properties:
              action:
                description: Action for this job, { start, cancel }
                type: string
              backupName:
                description: BackupName is Backup plan name
                type: string
              backupPlanRef:
                description: BackupPlanRef is Backup Plan spec pointer. Created at plan creation, and readonly
                properties:
                  clusterName:
                    description: Name of the cluster CR
                    type: string
                  copyMethod:
                    description: Copy method, in {"filesystem", "snapshot"}, default is "filesystem"
                    type: string
                  desc:
                    description: Desc is description for a backup plan.
                    type: string
                  displayName:
                    description: DisplayName is human-readable name
                    type: string
                  excludePV:
                    description: Exclude PV as backup resource, default is false
                    type: boolean
                  excludedResources:
                    description: Excluded resources, default is emty, means exclude none
                    items:
                      type: string
                    type: array
                  includedResources:
                    description: Included resources, default is emty, means all resources
                    items:
                      type: string
                    type: array
                  namespaces:
                    description: Namespaces to be backed up
                    items:
                      type: string
                    type: array
                  policy:
                    description: Policy of the backup plan. Default is on demand backup, retention is default to 7 days
                    properties:
                      desc:
                        description: Desc provides detailed description
                        type: string
                      displayName:
                        description: DisplayName is human-readable name
                        type: string
                      frequency:
                        description: Frequency of the backup, follow cron job string format
                        type: string
                      name:
                        description: Name of the policy
                        type: string
                      pause:
                        description: Pause true means scheduled backup is paused
                        type: boolean
                      repeat:
                        description: Repeat true means scheduled backup, false means on demand backup
                        type: boolean
                      retention:
                        description: Retention of the backup, unit is hour
                        type: integer
                    type: object
                  storageName:
                    description: Name of the storage CR
                    type: string
                  storageRef:
                    description: Storage spec structure is embeded as a pointer here. Created at plan creation, and only changed when StorageName is changed.
                    properties:
                      desc:
                        description: Desc provides detailed description
                        type: string
                      displayName:
                        description: DisplayName is human-readable name
                        type: string
                      isDefaultStorage:
                        description: IsDefaultStorage indicates it is default storage for use
                        type: boolean
                      s3Config:
                        description: S3Config includes S3 access configuration
                        properties:
                          accessKeyId:
                            description: AccessKeyId is S3 aws-access-key-id
                            type: string
                          bucket:
                            description: Bucket is S3 bucket name
                            type: string
                          credsSecretName:
                            description: CredsSecretName links to a secret to access S3 object
                            type: string
                          insecure:
                            description: Insecure indicates not to verify https of s3url
                            type: boolean
                          region:
                            description: Region is S3 region
                            type: string
                          s3url:
                            description: S3URL is s3 URL
                            type: string
                          secretAccessKey:
                            description: SecretAccessKey is S3 aws-secret-access-key
                            type: string
                        required:
                        - accessKeyId
                        - bucket
                        - s3url
                        - secretAccessKey
                        type: object
                      s3Provider:
                        description: S3Provider is cloud provider for S3 service
                        type: string
                      tenant:
                        description: Tenant is global unique tenant id of a user
                        type: string
                      volumeSnapshotConfig:
                        description: VolumeSnapshotConfig includes configuration for volume snapshot
                        properties:
                          credsSecretName:
                            description: CredsSecretName links to a secret which includes EBS volume snapshot credential
                            type: string
                          region:
                            description: Region is region of EBS volume in public cloud environment
                            type: string
                        type: object
                      volumeSnapshotProvider:
                        description: VolumeSnapshotProvider is cloud provider for volume snapshot service
                        type: string
                    required:
                    - tenant
                    type: object
                  tenant:
                    description: Tenant is global unique tenant id of a user
                    type: string
                required:
                - clusterName
                - storageName
                - tenant
                type: object
              desc:
                description: Desc provides detailed description
                type: string
              displayName:
                description: DisplayName is human-readable name
                type: string
              tenant:
                description: Tenant is Unique name of tenant
                type: string
            required:
            - backupName
            - tenant
            type: object
          status:
            description: BackupJobStatus defines the observed state of BackupJob
            properties:
              conditions:
                description: Conditions describes the detailed state of BackupJob
                items:
                  description: Condition represents the state of the operator's reconciliation functionality.
                  properties:
                    lastHeartbeatTime:
                      format: date-time
                      type: string
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      description: ConditionType is the state of the operator's reconciliation functionality.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              phase:
                description: Phase describes the overall status of BackupJob
                type: string
              progress:
                description: Progress describes the overall progress of BackupJob
                properties:
                  stepsCompleted:
                    type: integer
                  totalSteps:
                    type: integer
                type: object
              report:
                description: Report provides a summary status of backup job execution
                properties:
                  backedUpItems:
                    description: Backed up items
                    type: integer
                  details:
                    additionalProperties:
                      items:
                        type: string
                      type: array
                    description: Resource details
                    type: object
                  endTime:
                    description: EndTime is the time backup job is completed
                    format: date-time
                    type: string
                  expiredTime:
                    description: ExpiredTime is the time backup data is expired and deleted
                    format: date-time
                    type: string
                  startTime:
                    description: StartTime is the time backup job is executed
                    format: date-time
                    type: string
                  submitTime:
                    description: SubmitTime is when the backup job is submitted from user
                    format: date-time
                    type: string
                  totalItems:
                    description: Total items for backup
                    type: integer
                  totalPVC:
                    description: TotalPVC is number of PVC preserved in the backup job
                    type: integer
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: backupplans.ys.jibudata.com
spec:
  group: ys.jibudata.com
  names:
    kind: BackupPlan
    listKind: BackupPlanList
    plural: backupplans
    singular: backupplan
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: BackupPlan is the Schema for the backupplans API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: BackupPlanSpec defines the desired state of BackupPlan
            properties:
              clusterName:
                description: Name of the cluster CR
                type: string
              copyMethod:
                description: Copy method, in {"filesystem", "snapshot"}, default is "filesystem"
                type: string
              desc:
                description: Desc is description for a backup plan.
                type: string
              displayName:
                description: DisplayName is human-readable name
                type: string
              excludePV:
                description: Exclude PV as backup resource, default is false
                type: boolean
              excludedResources:
                description: Excluded resources, default is emty, means exclude none
                items:
                  type: string
                type: array
              includedResources:
                description: Included resources, default is emty, means all resources
                items:
                  type: string
                type: array
              namespaces:
                description: Namespaces to be backed up
                items:
                  type: string
                type: array
              policy:
                description: Policy of the backup plan. Default is on demand backup, retention is default to 7 days
                properties:
                  desc:
                    description: Desc provides detailed description
                    type: string
                  displayName:
                    description: DisplayName is human-readable name
                    type: string
                  frequency:
                    description: Frequency of the backup, follow cron job string format
                    type: string
                  name:
                    description: Name of the policy
                    type: string
                  pause:
                    description: Pause true means scheduled backup is paused
                    type: boolean
                  repeat:
                    description: Repeat true means scheduled backup, false means on demand backup
                    type: boolean
                  retention:
                    description: Retention of the backup, unit is hour
                    type: integer
                type: object
              storageName:
                description: Name of the storage CR
                type: string
              storageRef:
                description: Storage spec structure is embeded as a pointer here. Created at plan creation, and only changed when StorageName is changed.
                properties:
                  desc:
                    description: Desc provides detailed description
                    type: string
                  displayName:
                    description: DisplayName is human-readable name
                    type: string
                  isDefaultStorage:
                    description: IsDefaultStorage indicates it is default storage for use
                    type: boolean
                  s3Config:
                    description: S3Config includes S3 access configuration
                    properties:
                      accessKeyId:
                        description: AccessKeyId is S3 aws-access-key-id
                        type: string
                      bucket:
                        description: Bucket is S3 bucket name
                        type: string
                      credsSecretName:
                        description: CredsSecretName links to a secret to access S3 object
                        type: string
                      insecure:
                        description: Insecure indicates not to verify https of s3url
                        type: boolean
                      region:
                        description: Region is S3 region
                        type: string
                      s3url:
                        description: S3URL is s3 URL
                        type: string
                      secretAccessKey:
                        description: SecretAccessKey is S3 aws-secret-access-key
                        type: string
                    required:
                    - accessKeyId
                    - bucket
                    - s3url
                    - secretAccessKey
                    type: object
                  s3Provider:
                    description: S3Provider is cloud provider for S3 service
                    type: string
                  tenant:
                    description: Tenant is global unique tenant id of a user
                    type: string
                  volumeSnapshotConfig:
                    description: VolumeSnapshotConfig includes configuration for volume snapshot
                    properties:
                      credsSecretName:
                        description: CredsSecretName links to a secret which includes EBS volume snapshot credential
                        type: string
                      region:
                        description: Region is region of EBS volume in public cloud environment
                        type: string
                    type: object
                  volumeSnapshotProvider:
                    description: VolumeSnapshotProvider is cloud provider for volume snapshot service
                    type: string
                required:
                - tenant
                type: object
              tenant:
                description: Tenant is global unique tenant id of a user
                type: string
            required:
            - clusterName
            - storageName
            - tenant
            type: object
          status:
            description: BackupPlanStatus defines the observed state of BackupPlan
            properties:
              conditions:
                description: Conditions describes the detailed state of backup plan
                items:
                  description: Condition represents the state of the operator's reconciliation functionality.
                  properties:
                    lastHeartbeatTime:
                      format: date-time
                      type: string
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      description: ConditionType is the state of the operator's reconciliation functionality.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              currentJobName:
                description: CurrentJobName is the backup job is latest backup job
                type: string
              currentJobPhase:
                description: CurrentJobPhase is the phase of latest backup job
                type: string
              jobDetail:
                additionalProperties:
                  type: string
                description: JobDetail is some detail info of jobs that referring this plan
                type: object
              phase:
                description: Phase describes the overall status of backup plan
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: clusters.ys.jibudata.com
spec:
  group: ys.jibudata.com
  names:
    kind: Cluster
    listKind: ClusterList
    plural: clusters
    singular: cluster
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Cluster is the Schema for the clusters API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: ClusterSpec defines the desired state of Cluster
            properties:
              apiEndpoint:
                description: APIEndpoint is API endpoint
                type: string
              desc:
                description: Desc is description for a cluster.
                type: string
              displayName:
                description: DisplayName is human-readable name
                type: string
              excludedNamespaces:
                description: ExcludedNamespaces indicates the namespaces is excluded for backup management
                items:
                  type: string
                type: array
              extraParams:
                additionalProperties:
                  type: string
                description: ExtraParams store cluster's extra parameters
                type: object
              kubeconfig:
                description: KubeConfig provides the access information of the cluster
                type: string
              provider:
                description: Provider
                type: string
              region:
                description: Region reflects cloud region of running cluster
                type: string
              role:
                description: Role indicates the cluster type for multi-cluster environment
                type: string
              secretName:
                description: SecretName is Secret name
                type: string
              serviceAccount:
                description: ServiceAccount is Servcie account
                type: string
              snapshotClasses:
                description: SnapshotClasses contain the available volumeSnapshotClass of the cluster if not empty
                items:
                  properties:
                    deletionPolicy:
                      type: string
                    driver:
                      type: string
                    name:
                      type: string
                  required:
                  - deletionPolicy
                  - driver
                  - name
                  type: object
                type: array
              storageClasses:
                description: StorageClasses contain the available storageclasses of the cluster if not empty
                items:
                  properties:
                    accessModes:
                      items:
                        type: string
                      type: array
                    default:
                      type: boolean
                    name:
                      type: string
                    provisioner:
                      type: string
                  type: object
                type: array
              tenant:
                description: Tenant is global unique tenant id of a user
                type: string
              zone:
                description: Zone reflects available zone of running cluster
                type: string
            required:
            - kubeconfig
            - tenant
            type: object
          status:
            description: ClusterStatus defines the observed state of Cluster
            properties:
              conditions:
                description: Conditions describes the detailed state of cluster
                items:
                  description: Condition represents the state of the operator's reconciliation functionality.
                  properties:
                    lastHeartbeatTime:
                      format: date-time
                      type: string
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      description: ConditionType is the state of the operator's reconciliation functionality.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              phase:
                description: Phase describes the overall status of Cluster
                type: string
              version:
                description: Version reflects the k8s version of cluster
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: restorejobs.ys.jibudata.com
spec:
  group: ys.jibudata.com
  names:
    kind: RestoreJob
    listKind: RestoreJobList
    plural: restorejobs
    singular: restorejob
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: RestoreJob is the Schema for the restorejobs API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: RestoreJobSpec defines the desired state of RestoreJob
            properties:
              action:
                description: Action of restore job, { start, cancel }
                type: string
              backupJobName:
                description: BackupJobName is Name of backupjob
                type: string
              backupJobRef:
                description: BackupJobRef is Backup Job reference
                properties:
                  action:
                    description: Action for this job, { start, cancel }
                    type: string
                  backupName:
                    description: BackupName is Backup plan name
                    type: string
                  backupPlanRef:
                    description: BackupPlanRef is Backup Plan spec pointer. Created at plan creation, and readonly
                    properties:
                      clusterName:
                        description: Name of the cluster CR
                        type: string
                      copyMethod:
                        description: Copy method, in {"filesystem", "snapshot"}, default is "filesystem"
                        type: string
                      desc:
                        description: Desc is description for a backup plan.
                        type: string
                      displayName:
                        description: DisplayName is human-readable name
                        type: string
                      excludePV:
                        description: Exclude PV as backup resource, default is false
                        type: boolean
                      excludedResources:
                        description: Excluded resources, default is emty, means exclude none
                        items:
                          type: string
                        type: array
                      includedResources:
                        description: Included resources, default is emty, means all resources
                        items:
                          type: string
                        type: array
                      namespaces:
                        description: Namespaces to be backed up
                        items:
                          type: string
                        type: array
                      policy:
                        description: Policy of the backup plan. Default is on demand backup, retention is default to 7 days
                        properties:
                          desc:
                            description: Desc provides detailed description
                            type: string
                          displayName:
                            description: DisplayName is human-readable name
                            type: string
                          frequency:
                            description: Frequency of the backup, follow cron job string format
                            type: string
                          name:
                            description: Name of the policy
                            type: string
                          pause:
                            description: Pause true means scheduled backup is paused
                            type: boolean
                          repeat:
                            description: Repeat true means scheduled backup, false means on demand backup
                            type: boolean
                          retention:
                            description: Retention of the backup, unit is hour
                            type: integer
                        type: object
                      storageName:
                        description: Name of the storage CR
                        type: string
                      storageRef:
                        description: Storage spec structure is embeded as a pointer here. Created at plan creation, and only changed when StorageName is changed.
                        properties:
                          desc:
                            description: Desc provides detailed description
                            type: string
                          displayName:
                            description: DisplayName is human-readable name
                            type: string
                          isDefaultStorage:
                            description: IsDefaultStorage indicates it is default storage for use
                            type: boolean
                          s3Config:
                            description: S3Config includes S3 access configuration
                            properties:
                              accessKeyId:
                                description: AccessKeyId is S3 aws-access-key-id
                                type: string
                              bucket:
                                description: Bucket is S3 bucket name
                                type: string
                              credsSecretName:
                                description: CredsSecretName links to a secret to access S3 object
                                type: string
                              insecure:
                                description: Insecure indicates not to verify https of s3url
                                type: boolean
                              region:
                                description: Region is S3 region
                                type: string
                              s3url:
                                description: S3URL is s3 URL
                                type: string
                              secretAccessKey:
                                description: SecretAccessKey is S3 aws-secret-access-key
                                type: string
                            required:
                            - accessKeyId
                            - bucket
                            - s3url
                            - secretAccessKey
                            type: object
                          s3Provider:
                            description: S3Provider is cloud provider for S3 service
                            type: string
                          tenant:
                            description: Tenant is global unique tenant id of a user
                            type: string
                          volumeSnapshotConfig:
                            description: VolumeSnapshotConfig includes configuration for volume snapshot
                            properties:
                              credsSecretName:
                                description: CredsSecretName links to a secret which includes EBS volume snapshot credential
                                type: string
                              region:
                                description: Region is region of EBS volume in public cloud environment
                                type: string
                            type: object
                          volumeSnapshotProvider:
                            description: VolumeSnapshotProvider is cloud provider for volume snapshot service
                            type: string
                        required:
                        - tenant
                        type: object
                      tenant:
                        description: Tenant is global unique tenant id of a user
                        type: string
                    required:
                    - clusterName
                    - storageName
                    - tenant
                    type: object
                  desc:
                    description: Desc provides detailed description
                    type: string
                  displayName:
                    description: DisplayName is human-readable name
                    type: string
                  tenant:
                    description: Tenant is Unique name of tenant
                    type: string
                required:
                - backupName
                - tenant
                type: object
              desc:
                description: Desc provides detailed description
                type: string
              displayName:
                description: DisplayName is human-readable name
                type: string
              restoreName:
                description: RestoreName is RestorePlan Name
                type: string
              restorePlanRef:
                description: RestorePlanRef is Restore Plan reference
                properties:
                  backupName:
                    description: BackupName is Backup Plan Name
                    type: string
                  backupPlanRef:
                    description: BackupPlanRef is Backup plan reference
                    properties:
                      clusterName:
                        description: Name of the cluster CR
                        type: string
                      copyMethod:
                        description: Copy method, in {"filesystem", "snapshot"}, default is "filesystem"
                        type: string
                      desc:
                        description: Desc is description for a backup plan.
                        type: string
                      displayName:
                        description: DisplayName is human-readable name
                        type: string
                      excludePV:
                        description: Exclude PV as backup resource, default is false
                        type: boolean
                      excludedResources:
                        description: Excluded resources, default is emty, means exclude none
                        items:
                          type: string
                        type: array
                      includedResources:
                        description: Included resources, default is emty, means all resources
                        items:
                          type: string
                        type: array
                      namespaces:
                        description: Namespaces to be backed up
                        items:
                          type: string
                        type: array
                      policy:
                        description: Policy of the backup plan. Default is on demand backup, retention is default to 7 days
                        properties:
                          desc:
                            description: Desc provides detailed description
                            type: string
                          displayName:
                            description: DisplayName is human-readable name
                            type: string
                          frequency:
                            description: Frequency of the backup, follow cron job string format
                            type: string
                          name:
                            description: Name of the policy
                            type: string
                          pause:
                            description: Pause true means scheduled backup is paused
                            type: boolean
                          repeat:
                            description: Repeat true means scheduled backup, false means on demand backup
                            type: boolean
                          retention:
                            description: Retention of the backup, unit is hour
                            type: integer
                        type: object
                      storageName:
                        description: Name of the storage CR
                        type: string
                      storageRef:
                        description: Storage spec structure is embeded as a pointer here. Created at plan creation, and only changed when StorageName is changed.
                        properties:
                          desc:
                            description: Desc provides detailed description
                            type: string
                          displayName:
                            description: DisplayName is human-readable name
                            type: string
                          isDefaultStorage:
                            description: IsDefaultStorage indicates it is default storage for use
                            type: boolean
                          s3Config:
                            description: S3Config includes S3 access configuration
                            properties:
                              accessKeyId:
                                description: AccessKeyId is S3 aws-access-key-id
                                type: string
                              bucket:
                                description: Bucket is S3 bucket name
                                type: string
                              credsSecretName:
                                description: CredsSecretName links to a secret to access S3 object
                                type: string
                              insecure:
                                description: Insecure indicates not to verify https of s3url
                                type: boolean
                              region:
                                description: Region is S3 region
                                type: string
                              s3url:
                                description: S3URL is s3 URL
                                type: string
                              secretAccessKey:
                                description: SecretAccessKey is S3 aws-secret-access-key
                                type: string
                            required:
                            - accessKeyId
                            - bucket
                            - s3url
                            - secretAccessKey
                            type: object
                          s3Provider:
                            description: S3Provider is cloud provider for S3 service
                            type: string
                          tenant:
                            description: Tenant is global unique tenant id of a user
                            type: string
                          volumeSnapshotConfig:
                            description: VolumeSnapshotConfig includes configuration for volume snapshot
                            properties:
                              credsSecretName:
                                description: CredsSecretName links to a secret which includes EBS volume snapshot credential
                                type: string
                              region:
                                description: Region is region of EBS volume in public cloud environment
                                type: string
                            type: object
                          volumeSnapshotProvider:
                            description: VolumeSnapshotProvider is cloud provider for volume snapshot service
                            type: string
                        required:
                        - tenant
                        type: object
                      tenant:
                        description: Tenant is global unique tenant id of a user
                        type: string
                    required:
                    - clusterName
                    - storageName
                    - tenant
                    type: object
                  desc:
                    description: Desc provides detailed description
                    type: string
                  destClusterName:
                    description: DestClusterName is Destination cluster name
                    type: string
                  displayName:
                    description: DisplayName is human-readable name
                    type: string
                  excludedResources:
                    description: ExcludedResources is excluded resources, default empty means do not exclude any resources
                    items:
                      type: string
                    type: array
                  namespaceMappings:
                    description: 'NamespaceMappings is namespace mappings, in k:v pairs, e.g., "A: B" means original backup namepsace is A, restore to namespace B'
                    items:
                      type: string
                    type: array
                  tenant:
                    description: Tenant is unique name of tenant
                    type: string
                required:
                - backupName
                - destClusterName
                - tenant
                type: object
              tenant:
                description: Tenant is unique name of tenant
                type: string
            required:
            - backupJobName
            - restoreName
            - tenant
            type: object
          status:
            description: RestoreJobStatus defines the observed state of RestoreJob
            properties:
              conditions:
                description: Conditions describes the detailed state of RestoreJob
                items:
                  description: Condition represents the state of the operator's reconciliation functionality.
                  properties:
                    lastHeartbeatTime:
                      format: date-time
                      type: string
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      description: ConditionType is the state of the operator's reconciliation functionality.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              phase:
                description: Phase describes the overall status of RestoreJob
                type: string
              progress:
                description: Progress describes the overall progress of RestoreJob
                properties:
                  stepsCompleted:
                    type: integer
                  totalSteps:
                    type: integer
                type: object
              report:
                description: Report provides a summary status of restore job execution
                properties:
                  details:
                    additionalProperties:
                      items:
                        type: string
                      type: array
                    description: Resource details
                    type: object
                  endTime:
                    description: EndTime is the time restore job is completed
                    format: date-time
                    type: string
                  restoredItems:
                    description: Restored items
                    type: integer
                  results:
                    additionalProperties:
                      description: Velero result
                      properties:
                        cluster:
                          description: Cluster is a slice of messages related to restoring cluster- scoped resources.
                          items:
                            type: string
                          type: array
                        namespaces:
                          additionalProperties:
                            items:
                              type: string
                            type: array
                          description: Namespaces is a map of namespace name to slice of messages related to restoring namespace-scoped resources.
                          type: object
                        velero:
                          description: Velero messages
                          items:
                            type: string
                          type: array
                      type: object
                    description: Results
                    type: object
                  startTime:
                    description: StartTime is the time restore job is executed
                    format: date-time
                    type: string
                  totalItems:
                    description: Total items for restore
                    type: integer
                  totalPVC:
                    description: TotalPVC is number of PVC restored in the restore job
                    type: integer
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: restoreplans.ys.jibudata.com
spec:
  group: ys.jibudata.com
  names:
    kind: RestorePlan
    listKind: RestorePlanList
    plural: restoreplans
    singular: restoreplan
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: RestorePlan is the Schema for the restoreplans API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: RestorePlanSpec defines the desired state of RestorePlan
            properties:
              backupName:
                description: BackupName is Backup Plan Name
                type: string
              backupPlanRef:
                description: BackupPlanRef is Backup plan reference
                properties:
                  clusterName:
                    description: Name of the cluster CR
                    type: string
                  copyMethod:
                    description: Copy method, in {"filesystem", "snapshot"}, default is "filesystem"
                    type: string
                  desc:
                    description: Desc is description for a backup plan.
                    type: string
                  displayName:
                    description: DisplayName is human-readable name
                    type: string
                  excludePV:
                    description: Exclude PV as backup resource, default is false
                    type: boolean
                  excludedResources:
                    description: Excluded resources, default is emty, means exclude none
                    items:
                      type: string
                    type: array
                  includedResources:
                    description: Included resources, default is emty, means all resources
                    items:
                      type: string
                    type: array
                  namespaces:
                    description: Namespaces to be backed up
                    items:
                      type: string
                    type: array
                  policy:
                    description: Policy of the backup plan. Default is on demand backup, retention is default to 7 days
                    properties:
                      desc:
                        description: Desc provides detailed description
                        type: string
                      displayName:
                        description: DisplayName is human-readable name
                        type: string
                      frequency:
                        description: Frequency of the backup, follow cron job string format
                        type: string
                      name:
                        description: Name of the policy
                        type: string
                      pause:
                        description: Pause true means scheduled backup is paused
                        type: boolean
                      repeat:
                        description: Repeat true means scheduled backup, false means on demand backup
                        type: boolean
                      retention:
                        description: Retention of the backup, unit is hour
                        type: integer
                    type: object
                  storageName:
                    description: Name of the storage CR
                    type: string
                  storageRef:
                    description: Storage spec structure is embeded as a pointer here. Created at plan creation, and only changed when StorageName is changed.
                    properties:
                      desc:
                        description: Desc provides detailed description
                        type: string
                      displayName:
                        description: DisplayName is human-readable name
                        type: string
                      isDefaultStorage:
                        description: IsDefaultStorage indicates it is default storage for use
                        type: boolean
                      s3Config:
                        description: S3Config includes S3 access configuration
                        properties:
                          accessKeyId:
                            description: AccessKeyId is S3 aws-access-key-id
                            type: string
                          bucket:
                            description: Bucket is S3 bucket name
                            type: string
                          credsSecretName:
                            description: CredsSecretName links to a secret to access S3 object
                            type: string
                          insecure:
                            description: Insecure indicates not to verify https of s3url
                            type: boolean
                          region:
                            description: Region is S3 region
                            type: string
                          s3url:
                            description: S3URL is s3 URL
                            type: string
                          secretAccessKey:
                            description: SecretAccessKey is S3 aws-secret-access-key
                            type: string
                        required:
                        - accessKeyId
                        - bucket
                        - s3url
                        - secretAccessKey
                        type: object
                      s3Provider:
                        description: S3Provider is cloud provider for S3 service
                        type: string
                      tenant:
                        description: Tenant is global unique tenant id of a user
                        type: string
                      volumeSnapshotConfig:
                        description: VolumeSnapshotConfig includes configuration for volume snapshot
                        properties:
                          credsSecretName:
                            description: CredsSecretName links to a secret which includes EBS volume snapshot credential
                            type: string
                          region:
                            description: Region is region of EBS volume in public cloud environment
                            type: string
                        type: object
                      volumeSnapshotProvider:
                        description: VolumeSnapshotProvider is cloud provider for volume snapshot service
                        type: string
                    required:
                    - tenant
                    type: object
                  tenant:
                    description: Tenant is global unique tenant id of a user
                    type: string
                required:
                - clusterName
                - storageName
                - tenant
                type: object
              desc:
                description: Desc provides detailed description
                type: string
              destClusterName:
                description: DestClusterName is Destination cluster name
                type: string
              displayName:
                description: DisplayName is human-readable name
                type: string
              excludedResources:
                description: ExcludedResources is excluded resources, default empty means do not exclude any resources
                items:
                  type: string
                type: array
              namespaceMappings:
                description: 'NamespaceMappings is namespace mappings, in k:v pairs, e.g., "A: B" means original backup namepsace is A, restore to namespace B'
                items:
                  type: string
                type: array
              tenant:
                description: Tenant is unique name of tenant
                type: string
            required:
            - backupName
            - destClusterName
            - tenant
            type: object
          status:
            description: RestorePlanStatus defines the observed state of RestorePlan
            properties:
              conditions:
                description: Conditions describes the detailed state of restore plan
                items:
                  description: Condition represents the state of the operator's reconciliation functionality.
                  properties:
                    lastHeartbeatTime:
                      format: date-time
                      type: string
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      description: ConditionType is the state of the operator's reconciliation functionality.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              currentJobName:
                description: CurrentJobName is the restore job is latest restore job
                type: string
              currentJobPhase:
                description: CurrentJobPhase is the phase of latest restore job
                type: string
              jobDetail:
                additionalProperties:
                  type: string
                description: JobDetail is some detail info of jobs that referring this plan
                type: object
              phase:
                description: Phase describes the overall status of restore plan
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: storages.ys.jibudata.com
spec:
  group: ys.jibudata.com
  names:
    kind: Storage
    listKind: StorageList
    plural: storages
    singular: storage
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Storage is the Schema for the storages API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: StorageSpec defines the desired state of Storage
            properties:
              desc:
                description: Desc provides detailed description
                type: string
              displayName:
                description: DisplayName is human-readable name
                type: string
              isDefaultStorage:
                description: IsDefaultStorage indicates it is default storage for use
                type: boolean
              s3Config:
                description: S3Config includes S3 access configuration
                properties:
                  accessKeyId:
                    description: AccessKeyId is S3 aws-access-key-id
                    type: string
                  bucket:
                    description: Bucket is S3 bucket name
                    type: string
                  credsSecretName:
                    description: CredsSecretName links to a secret to access S3 object
                    type: string
                  insecure:
                    description: Insecure indicates not to verify https of s3url
                    type: boolean
                  region:
                    description: Region is S3 region
                    type: string
                  s3url:
                    description: S3URL is s3 URL
                    type: string
                  secretAccessKey:
                    description: SecretAccessKey is S3 aws-secret-access-key
                    type: string
                required:
                - accessKeyId
                - bucket
                - s3url
                - secretAccessKey
                type: object
              s3Provider:
                description: S3Provider is cloud provider for S3 service
                type: string
              tenant:
                description: Tenant is global unique tenant id of a user
                type: string
              volumeSnapshotConfig:
                description: VolumeSnapshotConfig includes configuration for volume snapshot
                properties:
                  credsSecretName:
                    description: CredsSecretName links to a secret which includes EBS volume snapshot credential
                    type: string
                  region:
                    description: Region is region of EBS volume in public cloud environment
                    type: string
                type: object
              volumeSnapshotProvider:
                description: VolumeSnapshotProvider is cloud provider for volume snapshot service
                type: string
            required:
            - tenant
            type: object
          status:
            description: StorageStatus defines the observed state of Storage
            properties:
              conditions:
                description: Conditions describes the detailed state of Tenant
                items:
                  description: Condition represents the state of the operator's reconciliation functionality.
                  properties:
                    lastHeartbeatTime:
                      format: date-time
                      type: string
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      description: ConditionType is the state of the operator's reconciliation functionality.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              phase:
                description: Phase describes the overall status of Tenant
                type: string
              testResults:
                additionalProperties:
                  description: TestResult defines test result in a managed cluster
                  properties:
                    reason:
                      type: string
                    result:
                      type: string
                  type: object
                description: TestResults describe the test result in each cluster
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: tenantmanagers.ys.jibudata.com
spec:
  group: ys.jibudata.com
  names:
    kind: TenantManager
    listKind: TenantManagerList
    plural: tenantmanagers
    singular: tenantmanager
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: TenantManager is the Schema for the tenantmanagers API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: TenantManagerSpec defines the desired state of TenantManager
            properties:
              expandThreshold:
                type: integer
              maxTenantWorker:
                type: integer
              minTenantWorker:
                type: integer
              shrinkThreshold:
                type: integer
              syncIntervalSeconds:
                type: integer
              tenantLimit:
                type: integer
            type: object
          status:
            description: TenantManagerStatus defines the observed state of TenantManager
            properties:
              addingTenantList:
                description: AddingList includes tenants which are under allocation
                items:
                  description: 'ObjectReference contains enough information to let you inspect or modify the referred object. --- New uses of this type are discouraged because of difficulty describing its usage when embedded in APIs.  1. Ignored fields.  It includes many fields which are not generally honored.  For instance, ResourceVersion and FieldPath are both very rarely valid in actual usage.  2. Invalid usage help.  It is impossible to add specific help for individual usage.  In most embedded usages, there are particular     restrictions like, "must refer only to types A and B" or "UID not honored" or "name must be restricted".     Those cannot be well described when embedded.  3. Inconsistent validation.  Because the usages are different, the validation rules are different by usage, which makes it hard for users to predict what will happen.  4. The fields are both imprecise and overly precise.  Kind is not a precise mapping to a URL. This can produce ambiguity     during interpretation and require a REST mapping.  In most cases, the dependency is on the group,resource tuple     and the version of the actual struct is irrelevant.  5. We cannot easily change it.  Because this type is embedded in many locations, updates to this type     will affect numerous schemas.  Don''t make new APIs embed an underspecified API type they do not control. Instead of using this type, create a locally provided and used type that is well-focused on your reference. For example, ServiceReferences for admission registration: https://github.com/kubernetes/api/blob/release-1.17/admissionregistration/v1/types.go#L533 .'
                  properties:
                    apiVersion:
                      description: API version of the referent.
                      type: string
                    fieldPath:
                      description: 'If referring to a piece of an object instead of an entire object, this string should contain a valid JSON/Go field access statement, such as desiredState.manifest.containers[2]. For example, if the object reference is to a container within a pod, this would take on a value like: "spec.containers{name}" (where "name" refers to the name of the container that triggered the event) or if no container name is specified "spec.containers[2]" (container with index 2 in this pod). This syntax is chosen only to have some well-defined way of referencing a part of an object. TODO: this design is not final and this field is subject to change in the future.'
                      type: string
                    kind:
                      description: 'Kind of the referent. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                      type: string
                    name:
                      description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                      type: string
                    namespace:
                      description: 'Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/'
                      type: string
                    resourceVersion:
                      description: 'Specific resourceVersion to which this reference is made, if any. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency'
                      type: string
                    uid:
                      description: 'UID of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids'
                      type: string
                  type: object
                type: array
              availableTenantWorkers:
                type: integer
              conditions:
                description: Conditions describes the detailed state of tenant manager
                items:
                  description: Condition represents the state of the operator's reconciliation functionality.
                  properties:
                    lastHeartbeatTime:
                      format: date-time
                      type: string
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      description: ConditionType is the state of the operator's reconciliation functionality.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              expectedTenantWorkers:
                type: integer
              inServiceTenantWorkers:
                items:
                  type: string
                type: array
              occupiedTenantWorkers:
                items:
                  type: string
                type: array
              phase:
                type: string
              reSyncTenantWorkerImage:
                description: Resync all images' version for upgrade/downgrade
                items:
                  type: string
                type: array
              releasedTenantWorkers:
                items:
                  type: string
                type: array
              removingTenantList:
                description: RemovingList includes tenants which are under release
                items:
                  description: 'ObjectReference contains enough information to let you inspect or modify the referred object. --- New uses of this type are discouraged because of difficulty describing its usage when embedded in APIs.  1. Ignored fields.  It includes many fields which are not generally honored.  For instance, ResourceVersion and FieldPath are both very rarely valid in actual usage.  2. Invalid usage help.  It is impossible to add specific help for individual usage.  In most embedded usages, there are particular     restrictions like, "must refer only to types A and B" or "UID not honored" or "name must be restricted".     Those cannot be well described when embedded.  3. Inconsistent validation.  Because the usages are different, the validation rules are different by usage, which makes it hard for users to predict what will happen.  4. The fields are both imprecise and overly precise.  Kind is not a precise mapping to a URL. This can produce ambiguity     during interpretation and require a REST mapping.  In most cases, the dependency is on the group,resource tuple     and the version of the actual struct is irrelevant.  5. We cannot easily change it.  Because this type is embedded in many locations, updates to this type     will affect numerous schemas.  Don''t make new APIs embed an underspecified API type they do not control. Instead of using this type, create a locally provided and used type that is well-focused on your reference. For example, ServiceReferences for admission registration: https://github.com/kubernetes/api/blob/release-1.17/admissionregistration/v1/types.go#L533 .'
                  properties:
                    apiVersion:
                      description: API version of the referent.
                      type: string
                    fieldPath:
                      description: 'If referring to a piece of an object instead of an entire object, this string should contain a valid JSON/Go field access statement, such as desiredState.manifest.containers[2]. For example, if the object reference is to a container within a pod, this would take on a value like: "spec.containers{name}" (where "name" refers to the name of the container that triggered the event) or if no container name is specified "spec.containers[2]" (container with index 2 in this pod). This syntax is chosen only to have some well-defined way of referencing a part of an object. TODO: this design is not final and this field is subject to change in the future.'
                      type: string
                    kind:
                      description: 'Kind of the referent. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                      type: string
                    name:
                      description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                      type: string
                    namespace:
                      description: 'Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/'
                      type: string
                    resourceVersion:
                      description: 'Specific resourceVersion to which this reference is made, if any. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency'
                      type: string
                    uid:
                      description: 'UID of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids'
                      type: string
                  type: object
                type: array
              state:
                type: string
              tenantLocations:
                additionalProperties:
                  type: string
                type: object
              totalTenants:
                type: integer
              unHealthyTenantWorkers:
                items:
                  type: string
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: tenants.ys.jibudata.com
spec:
  group: ys.jibudata.com
  names:
    kind: Tenant
    listKind: TenantList
    plural: tenants
    singular: tenant
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Tenant is the Schema for the tenants API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: TenantSpec defines the desired state of Tenant
            properties:
              contact:
                description: Contact provides ways to connect users of tenant, such as email or telphone
                type: string
              defaultBackupStorage:
                description: DefaultBackupStorage provides default backup storages of a tenant for backup/restore
                type: string
              desc:
                description: Desc provides detailed description
                type: string
              displayName:
                description: DisplayName is human-readable name
                type: string
              isExpired:
                description: IsExpired indicts if the resources from tenant can be reclaimed
                type: boolean
              orgName:
                description: OrgName is organization name of a tenant
                type: string
            type: object
          status:
            description: TenantStatus defines the observed state of Tenant
            properties:
              conditions:
                description: Conditions describes the detailed state of Tenant
                items:
                  description: Condition represents the state of the operator's reconciliation functionality.
                  properties:
                    lastHeartbeatTime:
                      format: date-time
                      type: string
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      description: ConditionType is the state of the operator's reconciliation functionality.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              phase:
                description: Phase describes the overall status of Tenant
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: tenantworkers.ys.jibudata.com
spec:
  group: ys.jibudata.com
  names:
    kind: TenantWorker
    listKind: TenantWorkerList
    plural: tenantworkers
    singular: tenantworker
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: TenantWorker is the Schema for the tenantworkers API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: TenantWorkerSpec defines the desired state of TenantWorker
            properties:
              backendControllerImage:
                type: string
              backendOperatorImage:
                type: string
              configs:
                additionalProperties:
                  type: string
                description: additional paramaters to configure the tenant worker, such as tech preview functions.
                type: object
              discoveryControllerImage:
                type: string
              imageRep:
                description: tenant worker configurations are independent for upgrade
                type: string
              isReClaimed:
                description: IsReClaimed indicts if resources of the tenant worker needs to be reclaimed
                type: boolean
              reSyncImageVersion:
                description: ReSyncVersion indicts if image version resync should be triggered
                type: boolean
              tenantLimit:
                description: TenantLimit caps the maximal tenant instances to be served
                type: integer
              tenantProcessorImage:
                type: string
              tenantRefs:
                description: TenantRefs includes current tenant instanaces for service
                items:
                  description: 'ObjectReference contains enough information to let you inspect or modify the referred object. --- New uses of this type are discouraged because of difficulty describing its usage when embedded in APIs.  1. Ignored fields.  It includes many fields which are not generally honored.  For instance, ResourceVersion and FieldPath are both very rarely valid in actual usage.  2. Invalid usage help.  It is impossible to add specific help for individual usage.  In most embedded usages, there are particular     restrictions like, "must refer only to types A and B" or "UID not honored" or "name must be restricted".     Those cannot be well described when embedded.  3. Inconsistent validation.  Because the usages are different, the validation rules are different by usage, which makes it hard for users to predict what will happen.  4. The fields are both imprecise and overly precise.  Kind is not a precise mapping to a URL. This can produce ambiguity     during interpretation and require a REST mapping.  In most cases, the dependency is on the group,resource tuple     and the version of the actual struct is irrelevant.  5. We cannot easily change it.  Because this type is embedded in many locations, updates to this type     will affect numerous schemas.  Don''t make new APIs embed an underspecified API type they do not control. Instead of using this type, create a locally provided and used type that is well-focused on your reference. For example, ServiceReferences for admission registration: https://github.com/kubernetes/api/blob/release-1.17/admissionregistration/v1/types.go#L533 .'
                  properties:
                    apiVersion:
                      description: API version of the referent.
                      type: string
                    fieldPath:
                      description: 'If referring to a piece of an object instead of an entire object, this string should contain a valid JSON/Go field access statement, such as desiredState.manifest.containers[2]. For example, if the object reference is to a container within a pod, this would take on a value like: "spec.containers{name}" (where "name" refers to the name of the container that triggered the event) or if no container name is specified "spec.containers[2]" (container with index 2 in this pod). This syntax is chosen only to have some well-defined way of referencing a part of an object. TODO: this design is not final and this field is subject to change in the future.'
                      type: string
                    kind:
                      description: 'Kind of the referent. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                      type: string
                    name:
                      description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                      type: string
                    namespace:
                      description: 'Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/'
                      type: string
                    resourceVersion:
                      description: 'Specific resourceVersion to which this reference is made, if any. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency'
                      type: string
                    uid:
                      description: 'UID of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids'
                      type: string
                  type: object
                type: array
              veleroHelperImage:
                type: string
              veleroImage:
                type: string
              veleroInstallerImage:
                type: string
              veleroPlugins:
                type: string
            required:
            - backendControllerImage
            - backendOperatorImage
            - discoveryControllerImage
            - imageRep
            - tenantLimit
            - tenantProcessorImage
            - veleroHelperImage
            - veleroImage
            - veleroInstallerImage
            - veleroPlugins
            type: object
          status:
            description: TenantWorkerStatus defines the observed state of TenantWorker
            properties:
              conditions:
                description: Conditions describes the detailed state of tenant worker
                items:
                  description: Condition represents the state of the operator's reconciliation functionality.
                  properties:
                    lastHeartbeatTime:
                      format: date-time
                      type: string
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      description: ConditionType is the state of the operator's reconciliation functionality.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              phase:
                description: Phase describes the overall status of tenant worker
                type: string
              state:
                description: State describes if the tenant worker can serve any tenant instance
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: jibu-baas-backup-admin
  namespace: backup-saas-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: jibu-baas-leader-election-role
  namespace: backup-saas-system
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  creationTimestamp: null
  name: jibu-baas-manager-role
rules:
- apiGroups:
  - ""
  resources:
  - namespaces
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - ys.jibudata.com
  resources:
  - backupjobs
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - ys.jibudata.com
  resources:
  - backupjobs/finalizers
  verbs:
  - update
- apiGroups:
  - ys.jibudata.com
  resources:
  - backupjobs/status
  verbs:
  - get
  - patch
  - update
  - watch
- apiGroups:
  - ys.jibudata.com
  resources:
  - backupplans
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - ys.jibudata.com
  resources:
  - backupplans/finalizers
  verbs:
  - update
- apiGroups:
  - ys.jibudata.com
  resources:
  - backupplans/status
  verbs:
  - get
  - patch
  - update
  - watch
- apiGroups:
  - ys.jibudata.com
  resources:
  - clusters
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - ys.jibudata.com
  resources:
  - clusters/finalizers
  verbs:
  - update
- apiGroups:
  - ys.jibudata.com
  resources:
  - clusters/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - ys.jibudata.com
  resources:
  - restorejobs
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - ys.jibudata.com
  resources:
  - restorejobs/finalizers
  verbs:
  - update
- apiGroups:
  - ys.jibudata.com
  resources:
  - restorejobs/status
  verbs:
  - get
  - patch
  - update
  - watch
- apiGroups:
  - ys.jibudata.com
  resources:
  - restoreplans
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - ys.jibudata.com
  resources:
  - restoreplans/finalizers
  verbs:
  - update
- apiGroups:
  - ys.jibudata.com
  resources:
  - restoreplans/status
  verbs:
  - get
  - patch
  - update
  - watch
- apiGroups:
  - ys.jibudata.com
  resources:
  - storages
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - ys.jibudata.com
  resources:
  - storages/finalizers
  verbs:
  - update
- apiGroups:
  - ys.jibudata.com
  resources:
  - storages/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - ys.jibudata.com
  resources:
  - tenantmanagers
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - ys.jibudata.com
  resources:
  - tenantmanagers/finalizers
  verbs:
  - update
- apiGroups:
  - ys.jibudata.com
  resources:
  - tenantmanagers/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - ys.jibudata.com
  resources:
  - tenants
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - ys.jibudata.com
  resources:
  - tenants/finalizers
  verbs:
  - update
- apiGroups:
  - ys.jibudata.com
  resources:
  - tenants/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - ys.jibudata.com
  resources:
  - tenantworkers
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - ys.jibudata.com
  resources:
  - tenantworkers/finalizers
  verbs:
  - update
- apiGroups:
  - ys.jibudata.com
  resources:
  - tenantworkers/status
  verbs:
  - get
  - patch
  - update
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: jibu-baas-metrics-reader
rules:
- nonResourceURLs:
  - /metrics
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: jibu-baas-proxy-role
rules:
- apiGroups:
  - authentication.k8s.io
  resources:
  - tokenreviews
  verbs:
  - create
- apiGroups:
  - authorization.k8s.io
  resources:
  - subjectaccessreviews
  verbs:
  - create
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: jibu-baas-leader-election-rolebinding
  namespace: backup-saas-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: jibu-baas-leader-election-role
subjects:
- kind: ServiceAccount
  name: jibu-baas-backup-admin
  namespace: backup-saas-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: jibu-baas-manager-rolebinding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: jibu-baas-manager-role
subjects:
- kind: ServiceAccount
  name: jibu-baas-backup-admin
  namespace: backup-saas-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: jibu-baas-proxy-rolebinding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: jibu-baas-proxy-role
subjects:
- kind: ServiceAccount
  name: jibu-baas-backup-admin
  namespace: backup-saas-system
---
apiVersion: v1
data:
  controller_manager_config.yaml: |
    apiVersion: controller-runtime.sigs.k8s.io/v1alpha1
    kind: ControllerManagerConfig
    health:
      healthProbeBindAddress: :8081
    metrics:
      bindAddress: 127.0.0.1:8080
    webhook:
      port: 9443
    leaderElection:
      leaderElect: true
      resourceName: fd949ef5.jibudata.com
kind: ConfigMap
metadata:
  name: jibu-baas-rest-server-config
  namespace: backup-saas-system
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app.kubernetes.io/component: metrics
    app.kubernetes.io/part-of: jibudata-backup-rest-server
  name: jibu-baas-rest-server-metrics-service
  namespace: backup-saas-system
spec:
  ports:
  - name: http
    port: 8080
    targetPort: 8080
  selector:
    app.kubernetes.io/part-of: jibudata-backup-rest-server
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app.kubernetes.io/part-of: jibudata-backup-rest-server
  name: jibu-baas-rest-server-service
  namespace: backup-saas-system
spec:
  ports:
  - nodePort: 31800
    port: 8000
    protocol: TCP
  selector:
    app.kubernetes.io/part-of: jibudata-backup-rest-server
  type: NodePort
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/part-of: jibudata-backup-rest-server
  name: jibu-baas-rest-server
  namespace: backup-saas-system
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/part-of: jibudata-backup-rest-server
  template:
    metadata:
      labels:
        app.kubernetes.io/part-of: jibudata-backup-rest-server
    spec:
      containers:
      - command:
        - /manager
        image: registry.cn-shanghai.aliyuncs.com/jibudata/backup-rest-server:main.f8891ac
        imagePullPolicy: Always
        name: manager
        resources:
          limits:
            cpu: 100m
            memory: 300Mi
          requests:
            cpu: 100m
            memory: 200Mi
        securityContext:
          allowPrivilegeEscalation: false
      serviceAccountName: jibu-baas-backup-admin
      terminationGracePeriodSeconds: 10
---
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  labels:
    app.kubernetes.io/part-of: jibudata-backup-rest-server
  name: jibu-baas-rest-server-metrics-monitor
  namespace: backup-saas-system
spec:
  endpoints:
  - bearerTokenFile: /var/run/secrets/kubernetes.io/serviceaccount/token
    path: /metrics
    port: http
    scheme: http
    tlsConfig:
      insecureSkipVerify: true
  selector:
    matchLabels:
      app.kubernetes.io/component: metrics
      app.kubernetes.io/part-of: jibudata-backup-rest-server
